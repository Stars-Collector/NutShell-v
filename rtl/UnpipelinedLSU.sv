// Generated by CIRCT firtool-1.62.0
// Standard header to adapt well known macros for register randomization.
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_MEM_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_MEM_INIT
`endif // not def RANDOMIZE
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_REG_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_REG_INIT
`endif // not def RANDOMIZE

// RANDOM may be set to an expression that produces a 32-bit random unsigned value.
`ifndef RANDOM
  `define RANDOM $random
`endif // not def RANDOM

// Users can define INIT_RANDOM as general code that gets injected into the
// initializer block for modules with registers.
`ifndef INIT_RANDOM
  `define INIT_RANDOM
`endif // not def INIT_RANDOM

// If using random initialization, you can also define RANDOMIZE_DELAY to
// customize the delay used, otherwise 0.002 is used.
`ifndef RANDOMIZE_DELAY
  `define RANDOMIZE_DELAY 0.002
`endif // not def RANDOMIZE_DELAY

// Define INIT_RANDOM_PROLOG_ for use in our modules below.
`ifndef INIT_RANDOM_PROLOG_
  `ifdef RANDOMIZE
    `ifdef VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
    `else  // VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
    `endif // VERILATOR
  `else  // RANDOMIZE
    `define INIT_RANDOM_PROLOG_
  `endif // RANDOMIZE
`endif // not def INIT_RANDOM_PROLOG_

// Include register initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_REG_
    `define ENABLE_INITIAL_REG_
  `endif // not def ENABLE_INITIAL_REG_
`endif // not def SYNTHESIS

// Include rmemory initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_MEM_
    `define ENABLE_INITIAL_MEM_
  `endif // not def ENABLE_INITIAL_MEM_
`endif // not def SYNTHESIS

// Standard header to adapt well known macros for prints and assertions.

// Users can define 'PRINTF_COND' to add an extra gate to prints.
`ifndef PRINTF_COND_
  `ifdef PRINTF_COND
    `define PRINTF_COND_ (`PRINTF_COND)
  `else  // PRINTF_COND
    `define PRINTF_COND_ 1
  `endif // PRINTF_COND
`endif // not def PRINTF_COND_

// Users can define 'ASSERT_VERBOSE_COND' to add an extra gate to assert error printing.
`ifndef ASSERT_VERBOSE_COND_
  `ifdef ASSERT_VERBOSE_COND
    `define ASSERT_VERBOSE_COND_ (`ASSERT_VERBOSE_COND)
  `else  // ASSERT_VERBOSE_COND
    `define ASSERT_VERBOSE_COND_ 1
  `endif // ASSERT_VERBOSE_COND
`endif // not def ASSERT_VERBOSE_COND_

// Users can define 'STOP_COND' to add an extra gate to stop conditions.
`ifndef STOP_COND_
  `ifdef STOP_COND
    `define STOP_COND_ (`STOP_COND)
  `else  // STOP_COND
    `define STOP_COND_ 1
  `endif // STOP_COND
`endif // not def STOP_COND_

module UnpipelinedLSU(	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
  input         clock,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
                reset,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
                io_in_valid,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input  [63:0] io_in_bits_src1,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
                io_in_bits_src2,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input  [6:0]  io_in_bits_func,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output        io_out_valid,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output [63:0] io_out_bits,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input  [63:0] io_wdata,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input  [31:0] io_instr,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input         io_dmem_req_ready,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output        io_dmem_req_valid,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output [38:0] io_dmem_req_bits_addr,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output [2:0]  io_dmem_req_bits_size,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output [3:0]  io_dmem_req_bits_cmd,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output [7:0]  io_dmem_req_bits_wmask,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output [63:0] io_dmem_req_bits_wdata,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input         io_dmem_resp_valid,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input  [63:0] io_dmem_resp_bits_rdata,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  output        io_isMMIO,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
                io_dtlbPF,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
                io_loadAddrMisaligned,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
                io_storeAddrMisaligned,	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:37:14
  input  [63:0] lrAddr__bore,
  output [63:0] setLrAddr__bore,
  input         lr__bore,
  output        lsExecUnit_r1__bore,
  input         lsExecUnit_dtlbFinish__bore,
                lsExecUnit_dtlbPF__bore,
                dtlbPF__bore,
  output        _WIRE__bore,
  output [63:0] lsExecUnit_io_in_bits_src1__bore,
  output        setLr__bore,
  input         lsuMMIO__bore,
  output        lsExecUnit__WIRE__bore,
  input         lsExecUnit_dtlbEnable__bore,
  output        setLrVal__bore,
                lsExecUnit_r_bore
);

  wire        _GEN;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :142:38, :160:36, :185:36
  wire [63:0] _LogPerfHelper_5_timer;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire        _LogPerfHelper_5_logEnable;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire [63:0] _LogPerfHelper_4_timer;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire        _LogPerfHelper_4_logEnable;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire [63:0] _LogPerfHelper_3_timer;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire        _LogPerfHelper_3_logEnable;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire [63:0] _LogPerfHelper_2_timer;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire        _LogPerfHelper_2_logEnable;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire [63:0] _LogPerfHelper_1_timer;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire        _LogPerfHelper_1_logEnable;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire [63:0] _LogPerfHelper_timer;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire        _LogPerfHelper_logEnable;	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
  wire [63:0] _atomALU_io_result;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:98:25
  wire        _lsExecUnit_io_out_valid;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28
  wire [63:0] _lsExecUnit_io_out_bits;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28
  wire        _lsExecUnit_io_loadAddrMisaligned;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28
  wire        _lsExecUnit_io_storeAddrMisaligned;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28
  wire [63:0] setLrAddr = io_in_bits_src1;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:72:25
  wire        atomReq = io_in_valid & io_in_bits_func[5];	// src/main/scala/nutcore/backend/fu/LSU.scala:54:38, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:53:26
  wire        _lrReq_T = io_in_bits_func == 7'h20;	// src/main/scala/nutcore/backend/fu/LSU.scala:57:37
  wire        _scReq_T = io_in_bits_func == 7'h21;	// src/main/scala/nutcore/backend/fu/LSU.scala:58:37
  wire        amoReq = io_in_valid & io_in_bits_func[5] & ~_lrReq_T & ~_scReq_T;	// src/main/scala/nutcore/backend/fu/LSU.scala:54:38, :57:37, :58:37, :59:{49,64}, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:54:26
  wire        _GEN_0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:58:37
  assign _GEN_0 = amoReq;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:54:26, :58:37
  wire        _GEN_1;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:60:35
  assign _GEN_1 = amoReq;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:54:26, :60:35
  wire        setLrVal = io_in_valid & _lrReq_T;	// src/main/scala/nutcore/backend/fu/LSU.scala:57:37, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:55:25, :71:24
  wire        scReq = io_in_valid & _scReq_T;	// src/main/scala/nutcore/backend/fu/LSU.scala:58:37, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:56:25
  wire        scInvalid = (io_in_bits_src1 != lrAddr__bore | ~lr__bore) & scReq;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:56:25, :81:{27,38,41,46}
  reg  [2:0]  state;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24
  reg  [63:0] atomMemReg;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:96:25
  reg  [63:0] atomRegReg;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:97:25
  wire        _GEN_2 = state == 3'h1;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24, :128:20
  wire        _GEN_3 = state == 3'h5;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24, :128:20
  wire        _GEN_4 = _GEN & _lsExecUnit_io_out_valid;	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :128:20, :142:38, :160:36, :185:36
  wire        _GEN_5 = ~(|state) | _GEN_2;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :97:25, :128:20
  wire        _GEN_6 = state == 3'h6;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :128:20, :193:17
  wire        _io_out_valid_T_2 = _GEN & _lsExecUnit_io_out_valid;	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :128:20, :142:38, :160:36, :185:36
  wire        _GEN_7 = state == 3'h3;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24, :128:20
  wire        _io_out_valid_T_3 = _GEN & _lsExecUnit_io_out_valid;	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :128:20, :142:38, :160:36, :185:36
  wire        _GEN_8 = state == 3'h4;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24, :128:20
  assign _GEN = _GEN_5 | _GEN_3 | ~_GEN_6;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:97:25, :128:20, :142:38, :160:36, :185:36
  wire [63:0] _GEN_9 = (|state) ? io_in_bits_src1 : io_in_bits_src1 + io_in_bits_src2;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :128:20, :143:{38,46}
  wire        _io_out_valid_T_4 = _GEN & _lsExecUnit_io_out_valid;	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :128:20, :142:38, :160:36, :185:36
  wire        _GEN_10 =
    ~(_GEN_3 | _GEN_6)
    & ((&state)
         ? _io_out_valid_T_2
         : _GEN_7 ? _io_out_valid_T_3 : _GEN_8 & _io_out_valid_T_4);	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :126:32, :128:20, :190:36, :207:36, :221:36, :235:36, :249:36
  wire        _GEN_11 =
    dtlbPF__bore | _lsExecUnit_io_loadAddrMisaligned | _lsExecUnit_io_storeAddrMisaligned;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :257:42
  wire        io_out_valid_0 =
    _GEN_11
    | ((|state)
         ? (_GEN_2 ? _lsExecUnit_io_out_valid : _GEN_10)
         : _lsExecUnit_io_out_valid | scInvalid);	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :81:46, :95:24, :128:20, :148:{38,66}, :166:36, :190:36, :207:36, :257:{42,68}, :259:20
  `ifndef SYNTHESIS	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:167:15
    always @(posedge clock) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:167:15
      automatic logic _GEN_12;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
      automatic logic _GEN_13;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
      automatic logic _GEN_14;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
      automatic logic _GEN_15;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
      _GEN_12 = (|state) & ~_GEN_2;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :128:20
      _GEN_13 = _GEN_12 & ~_GEN_3;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
      _GEN_14 = _GEN_13 & ~_GEN_6;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
      _GEN_15 = _GEN_14 & ~(&state);	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :128:20
      if ((|state) & _GEN_2 & ~reset & ~(~atomReq | ~amoReq | ~setLrVal | ~scReq)) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:53:26, :54:26, :56:25, :71:24, :95:24, :128:20, :167:{15,16,28,39,46,49}
        if (`ASSERT_VERBOSE_COND_)	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:167:15
          $error("Assertion failed\n    at UnpipelinedLSU.scala:167 assert(!atomReq || !amoReq || !lrReq || !scReq)\n");	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:167:15
        if (`STOP_COND_)	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:167:15
          $fatal;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:167:15
      end
      if ((`PRINTF_COND_) & _GEN_12 & _GEN_3 & _GEN_4 & _LogPerfHelper_logEnable
          & ~reset) begin	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :167:15, src/main/scala/utils/Debug.scala:49:26, :50:15
        $fwrite(32'h80000002, "[%d] UnpipelinedLSU: ", _LogPerfHelper_timer);	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/utils/Debug.scala:49:26
        $fwrite(32'h80000002, "[AMO-L] lsExecUnit.io.out.bits %x addr %x src2 %x\n",
                _lsExecUnit_io_out_bits, _GEN_9, io_wdata);	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :128:20, :143:38, src/main/scala/utils/Debug.scala:49:26, :50:15
      end
      if ((`PRINTF_COND_) & _GEN_13 & _GEN_6 & _LogPerfHelper_1_logEnable & ~reset) begin	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :167:15, src/main/scala/utils/Debug.scala:49:26, :50:15
        $fwrite(32'h80000002, "[%d] UnpipelinedLSU: ", _LogPerfHelper_1_timer);	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/utils/Debug.scala:49:26
        $fwrite(32'h80000002, "[AMO-A] src1 %x src2 %x res %x\n", atomMemReg, io_wdata,
                _atomALU_io_result);	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:96:25, :98:25, src/main/scala/utils/Debug.scala:49:26, :50:15
      end
      if ((`PRINTF_COND_) & _GEN_14 & (&state) & _io_out_valid_T_2
          & _LogPerfHelper_2_logEnable & ~reset) begin	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :128:20, :167:15, src/main/scala/utils/Debug.scala:49:26, :50:15
        $fwrite(32'h80000002, "[%d] UnpipelinedLSU: ", _LogPerfHelper_2_timer);	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/utils/Debug.scala:49:26
        $fwrite(32'h80000002, "[AMO-S] atomRegReg %x addr %x\n", atomRegReg, _GEN_9);	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:97:25, :128:20, :143:38, src/main/scala/utils/Debug.scala:49:26, :50:15
      end
      if ((`PRINTF_COND_) & _GEN_15 & _GEN_7 & _io_out_valid_T_3
          & _LogPerfHelper_3_logEnable & ~reset) begin	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :167:15, src/main/scala/utils/Debug.scala:49:26, :50:15
        $fwrite(32'h80000002, "[%d] UnpipelinedLSU: ", _LogPerfHelper_3_timer);	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/utils/Debug.scala:49:26
        $fwrite(32'h80000002, "[LR]\n");	// src/main/scala/utils/Debug.scala:49:26, :50:15
      end
      if ((`PRINTF_COND_) & _GEN_15 & ~_GEN_7 & _GEN_8 & _io_out_valid_T_4
          & _LogPerfHelper_4_logEnable & ~reset) begin	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :167:15, src/main/scala/utils/Debug.scala:49:26, :50:15
        $fwrite(32'h80000002, "[%d] UnpipelinedLSU: ", _LogPerfHelper_4_timer);	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/utils/Debug.scala:49:26
        $fwrite(32'h80000002, "[SC] \n");	// src/main/scala/utils/Debug.scala:49:26, :50:15
      end
      if ((`PRINTF_COND_) & io_out_valid_0 & _LogPerfHelper_5_logEnable & ~reset) begin	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :167:15, :257:68, :259:20, src/main/scala/utils/Debug.scala:49:26, :50:15
        $fwrite(32'h80000002, "[%d] UnpipelinedLSU: ", _LogPerfHelper_5_timer);	// difftest/src/main/scala/common/LogPerfControl.scala:60:79, src/main/scala/utils/Debug.scala:49:26
        $fwrite(32'h80000002, "[LSU-AGU] state %x inv %x inr %x\n", state, io_in_valid,
                _GEN_11
                | ((|state)
                     ? (_GEN_2 ? _GEN & _lsExecUnit_io_out_valid : _GEN_10)
                     : _GEN & _lsExecUnit_io_out_valid | scInvalid));	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :81:46, :95:24, :128:20, :142:38, :147:{38,64}, :160:36, :165:36, :185:36, :190:36, :207:36, :257:{42,68}, :260:19, src/main/scala/utils/Debug.scala:49:26, :50:15
      end
    end // always @(posedge)
  `endif // not def SYNTHESIS
  wire        setLr = io_out_valid_0 & (setLrVal | scReq);	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:56:25, :70:21, :71:24, :128:20, :257:68, :259:20, :270:{26,36}
  reg         mmioReg;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:280:26
  always @(posedge clock) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
    if (reset) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
      state <= 3'h0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24
      mmioReg <= 1'h0;	// src/main/scala/nutcore/backend/fu/LSU.scala:56:34, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:280:26
    end
    else begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
      if (_GEN_11)	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:257:42
        state <= 3'h0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24
      else if (|state) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :128:20
        if (_GEN_2) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
          if (io_out_valid_0)	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :257:68, :259:20
            state <= 3'h0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24
        end
        else if (_GEN_3) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
          if (_GEN_4)	// src/main/scala/chisel3/util/Decoupled.scala:51:35
            state <= 3'h6;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :193:17
        end
        else if (_GEN_6)	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
          state <= 3'h7;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :209:15
        else if ((&state)
                   ? _io_out_valid_T_2
                   : _GEN_7 ? _io_out_valid_T_3 : _GEN_8 & _io_out_valid_T_4)	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :128:20, :223:37, :224:17, :237:37, :238:17, :251:37, :252:17
          state <= 3'h0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24
      end
      else	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
        state <= scReq ? {~scInvalid, 2'h0} : setLrVal ? 3'h3 : amoReq ? 3'h5 : 3'h0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :54:26, :56:25, :71:24, :81:46, :95:24, :149:17, :152:{21,28}, :153:{20,27}, :154:{20,27,33}
      mmioReg <= ~io_out_valid_0 & (mmioReg ? mmioReg : lsuMMIO__bore);	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :257:68, :259:20, :280:26, :281:{21,31}, :282:{25,35}
    end
    if (~_GEN_5) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:97:25, :128:20
      if (_GEN_3)	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
        atomMemReg <= _lsExecUnit_io_out_bits;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :96:25
      else if (_GEN_6)	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20
        atomMemReg <= _atomALU_io_result;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:96:25, :98:25
    end
    if (_GEN_5 | ~_GEN_3) begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:97:25, :128:20
    end
    else	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:97:25, :128:20
      atomRegReg <= _lsExecUnit_io_out_bits;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28, :97:25
  end // always @(posedge)
  `ifdef ENABLE_INITIAL_REG_	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
    `ifdef FIRRTL_BEFORE_INITIAL	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
      `FIRRTL_BEFORE_INITIAL	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
    `endif // FIRRTL_BEFORE_INITIAL
    initial begin	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
      automatic logic [31:0] _RANDOM[0:4];	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
      `ifdef INIT_RANDOM_PROLOG_	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
        `INIT_RANDOM_PROLOG_	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
      `endif // INIT_RANDOM_PROLOG_
      `ifdef RANDOMIZE_REG_INIT	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
        for (logic [2:0] i = 3'h0; i < 3'h5; i += 3'h1) begin
          _RANDOM[i] = `RANDOM;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
        end	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
        state = _RANDOM[3'h0][2:0];	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24
        atomMemReg = {_RANDOM[3'h0][31:3], _RANDOM[3'h1], _RANDOM[3'h2][2:0]};	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :95:24, :96:25
        atomRegReg = {_RANDOM[3'h2][31:3], _RANDOM[3'h3], _RANDOM[3'h4][2:0]};	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :96:25, :97:25
        mmioReg = _RANDOM[3'h4][3];	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :97:25, :280:26
      `endif // RANDOMIZE_REG_INIT
    end // initial
    `ifdef FIRRTL_AFTER_INITIAL	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
      `FIRRTL_AFTER_INITIAL	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7
    `endif // FIRRTL_AFTER_INITIAL
  `endif // ENABLE_INITIAL_REG_
  LSExecUnit lsExecUnit (	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:47:28
    .clock                   (clock),
    .reset                   (reset),
    .io_in_valid
      ((|state)
         ? _GEN_2 | _GEN_3 | ~_GEN_6 & ((&state) | _GEN_7 | _GEN_8)
         : io_in_valid & ~atomReq),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:53:26, :95:24, :128:20, :141:{38,53,56}, :159:36, :184:36, :201:36, :215:36, :229:36
    .io_in_bits_src1         (_GEN_9),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :143:38
    .io_in_bits_func
      (_GEN_5
         ? io_in_bits_func
         : {_GEN_3 ? 6'h1 : (&state) ? 6'h5 : {3'h0, ~_GEN_7, 2'h1}, io_instr[12]}),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :64:26, :66:29, :95:24, :97:25, :128:20, :145:38, :163:36, :188:36, :219:36, :233:36
    .io_out_ready            (_GEN),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:128:20, :142:38, :160:36, :185:36
    .io_out_valid            (_lsExecUnit_io_out_valid),
    .io_out_bits             (_lsExecUnit_io_out_bits),
    .io_wdata                (_GEN_5 | ~(&state) ? io_wdata : atomMemReg),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:95:24, :96:25, :97:25, :128:20, :146:38, :164:36
    .io_dmem_req_ready       (io_dmem_req_ready),
    .io_dmem_req_valid       (io_dmem_req_valid),
    .io_dmem_req_bits_addr   (io_dmem_req_bits_addr),
    .io_dmem_req_bits_size   (io_dmem_req_bits_size),
    .io_dmem_req_bits_cmd    (io_dmem_req_bits_cmd),
    .io_dmem_req_bits_wmask  (io_dmem_req_bits_wmask),
    .io_dmem_req_bits_wdata  (io_dmem_req_bits_wdata),
    .io_dmem_resp_valid      (io_dmem_resp_valid),
    .io_dmem_resp_bits_rdata (io_dmem_resp_bits_rdata),
    .io_isMMIO               (/* unused */),
    .io_dtlbPF               (io_dtlbPF),
    .io_loadAddrMisaligned   (_lsExecUnit_io_loadAddrMisaligned),
    .io_storeAddrMisaligned  (_lsExecUnit_io_storeAddrMisaligned),
    .r_1__bore               (lsExecUnit_r1__bore),
    .dtlbFinish__bore        (lsExecUnit_dtlbFinish__bore),
    .dtlbPF__bore            (lsExecUnit_dtlbPF__bore),
    .isAMO__bore             (_GEN_1),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:60:35
    .io_in_bits_src1__bore   (lsExecUnit_io_in_bits_src1__bore),
    ._WIRE__bore             (lsExecUnit__WIRE__bore),
    .dtlbEnable__bore        (lsExecUnit_dtlbEnable__bore),
    .r__bore                 (lsExecUnit_r_bore)
  );
  AtomALU atomALU (	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:98:25
    .io_src1     (atomMemReg),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:96:25
    .io_src2     (io_wdata),
    .io_func     (io_in_bits_func),
    .io_isWordOp (~(io_instr[12])),	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:64:26, :66:{22,29}
    .io_result   (_atomALU_io_result)
  );
  LogPerfHelper LogPerfHelper (	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
    .timer     (_LogPerfHelper_timer),
    .logEnable (_LogPerfHelper_logEnable),
    .clean     (/* unused */),
    .dump      (/* unused */)
  );
  LogPerfHelper LogPerfHelper_1 (	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
    .timer     (_LogPerfHelper_1_timer),
    .logEnable (_LogPerfHelper_1_logEnable),
    .clean     (/* unused */),
    .dump      (/* unused */)
  );
  LogPerfHelper LogPerfHelper_2 (	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
    .timer     (_LogPerfHelper_2_timer),
    .logEnable (_LogPerfHelper_2_logEnable),
    .clean     (/* unused */),
    .dump      (/* unused */)
  );
  LogPerfHelper LogPerfHelper_3 (	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
    .timer     (_LogPerfHelper_3_timer),
    .logEnable (_LogPerfHelper_3_logEnable),
    .clean     (/* unused */),
    .dump      (/* unused */)
  );
  LogPerfHelper LogPerfHelper_4 (	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
    .timer     (_LogPerfHelper_4_timer),
    .logEnable (_LogPerfHelper_4_logEnable),
    .clean     (/* unused */),
    .dump      (/* unused */)
  );
  LogPerfHelper LogPerfHelper_5 (	// difftest/src/main/scala/common/LogPerfControl.scala:60:79
    .timer     (_LogPerfHelper_5_timer),
    .logEnable (_LogPerfHelper_5_logEnable),
    .clean     (/* unused */),
    .dump      (/* unused */)
  );
  assign io_out_valid = io_out_valid_0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :128:20, :257:68, :259:20
  assign io_out_bits =
    scReq ? {63'h0, scInvalid} : (&state) ? atomRegReg : _lsExecUnit_io_out_bits;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :47:28, :56:25, :81:46, :95:24, :97:25, :275:{23,45,52}
  assign io_isMMIO = mmioReg & io_out_valid_0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :128:20, :257:68, :259:20, :280:26, :283:26
  assign io_loadAddrMisaligned = _lsExecUnit_io_loadAddrMisaligned;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :47:28
  assign io_storeAddrMisaligned = _lsExecUnit_io_storeAddrMisaligned;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :47:28
  assign setLrAddr__bore = setLrAddr;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :72:25
  assign _WIRE__bore = _GEN_0;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :58:37
  assign setLr__bore = setLr;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :70:21
  assign setLrVal__bore = setLrVal;	// src/main/scala/nutcore/backend/fu/UnpipelinedLSU.scala:36:7, :71:24
endmodule

